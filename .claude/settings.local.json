{
  "permissions": {
    "allow": [
      "Bash(docker-compose up:*)",
      "Bash(docker ps:*)",
      "Bash(C:UsersEgemenDesktopbudget-systemvenvScriptspython.exe -m uvicorn:*)",
      "Bash(npm run dev:*)",
      "Bash(powershell.exe:*)",
      "Bash(python -c:*)",
      "Bash(netstat:*)",
      "Bash(findstr:*)",
      "Bash(taskkill:*)",
      "Bash(.venvScriptsactivate)",
      "Bash(uvicorn:*)",
      "Bash(curl:*)",
      "Bash(cmd.exe /c \".venv\\\\Scripts\\\\activate.bat && uvicorn app.main:app --reload --host 0.0.0.0 --port 8000\")",
      "Bash(cmd.exe /c \"call .venv\\\\Scripts\\\\activate.bat && python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000\")",
      "Bash(.venv/Scripts/python.exe:*)",
      "Bash(start cmd /k \".venv\\\\Scripts\\\\activate.bat && uvicorn app.main:app --reload --host 0.0.0.0 --port 8000\")",
      "Bash(del /s /q \"C:\\\\Users\\\\Egemen\\\\.claude-worktrees\\\\budget-system\\\\zen-davinci\\\\app\\\\__pycache__\\\\*\")",
      "Bash(del /s /q \"C:\\\\Users\\\\Egemen\\\\.claude-worktrees\\\\budget-system\\\\zen-davinci\\\\app\\\\api\\\\__pycache__\\\\*\")",
      "Bash(del /s /q \"C:\\\\Users\\\\Egemen\\\\.claude-worktrees\\\\budget-system\\\\zen-davinci\\\\app\\\\api\\\\v1\\\\__pycache__\\\\*\")",
      "Bash(del /s /q \"C:\\\\Users\\\\Egemen\\\\.claude-worktrees\\\\budget-system\\\\zen-davinci\\\\app\\\\api\\\\v1\\\\dynamic\\\\__pycache__\\\\*\")",
      "Bash(\".venv\\\\Scripts\\\\python.exe\" -c \"from app.api.v1.dynamic.master_data import router; print\\([r.path for r in router.routes]\\)\")",
      "Bash(cmd.exe /c \"cd /d C:\\\\Users\\\\Egemen\\\\.claude-worktrees\\\\budget-system\\\\zen-davinci && .venv\\\\Scripts\\\\python.exe -c \"\"from app.api.v1.dynamic.master_data import router; print\\([r.path for r in router.routes]\\)\"\"\")",
      "Bash(cmd //c \".venv\\\\Scripts\\\\python.exe check_routes.py\")",
      "Bash(\"C:\\\\Users\\\\Egemen\\\\Desktop\\\\budget-system\\\\venv\\\\Scripts\\\\python.exe\" check_routes.py)",
      "Bash(\"C:\\\\Users\\\\Egemen\\\\Desktop\\\\budget-system\\\\venv\\\\Scripts\\\\pip.exe\" install python-multipart)",
      "Bash(start cmd /k \"C:\\\\Users\\\\Egemen\\\\Desktop\\\\budget-system\\\\venv\\\\Scripts\\\\activate.bat && uvicorn app.main:app --reload --host 0.0.0.0 --port 8000\")",
      "Bash(\"C:\\\\Users\\\\Egemen\\\\Desktop\\\\budget-system\\\\venv\\\\Scripts\\\\python.exe\" -c \"\nfrom app.db.session import SessionLocal\nfrom app.models.user import User\n\ndb = SessionLocal\\(\\)\nusers = db.query\\(User\\).all\\(\\)\nfor u in users:\n    print\\(f''Username: {u.username}, Email: {u.email}''\\)\ndb.close\\(\\)\n\")",
      "Bash(\"C:\\\\Users\\\\Egemen\\\\Desktop\\\\budget-system\\\\venv\\\\Scripts\\\\python.exe\" -c \"\nfrom app.db.session import get_session_local\nfrom app.models.user import User\n\nSessionLocal = get_session_local\\(\\)\ndb = SessionLocal\\(\\)\nusers = db.query\\(User\\).all\\(\\)\nfor u in users:\n    print\\(f''Username: {u.username}, Email: {u.email}''\\)\ndb.close\\(\\)\n\")",
      "Bash(\"C:\\\\Users\\\\Egemen\\\\Desktop\\\\budget-system\\\\venv\\\\Scripts\\\\python.exe\" -c:*)",
      "Bash(TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiOTQyZjUxOTAtMTA0Mi00Njg0LWI3N2MtMThiYjg4NDExMTU1IiwidXNlcm5hbWUiOiJhZG1pbiIsImVtYWlsIjoiYWRtaW5AZXhhbXBsZS5jb20iLCJpc19hZG1pbiI6dHJ1ZSwiZXhwIjoxNzcwMTkwODk4LCJpYXQiOjE3NzAxMDQ0OTh9.oJNAdPzdZcoa7iq0Gl5WKq1tWmBfHYMVrMBroVeZMmw\")",
      "Bash(\"C:\\\\Users\\\\Egemen\\\\Desktop\\\\budget-system\\\\venv\\\\Scripts\\\\python.exe\" -c \"\nfrom app.db.session import get_session_local\nfrom app.models.dynamic.master_data import MasterData\nfrom app.models.dynamic.meta_entity import MetaEntity\nfrom app.models.dynamic.meta_attribute import MetaAttribute\nfrom sqlalchemy.orm import joinedload\n\nSessionLocal = get_session_local\\(\\)\ndb = SessionLocal\\(\\)\n\ndef get_flat_values\\(db, master_data\\):\n    flat = {''CODE'': master_data.code, ''NAME'': master_data.name}\n    for val in master_data.values:\n        attr = db.query\\(MetaAttribute\\).filter\\(MetaAttribute.id == val.attribute_id\\).first\\(\\)\n        if attr:\n            flat[attr.code] = val.value\n    return flat\n\ndef enrich_response\\(db, record\\):\n    entity = db.query\\(MetaEntity\\).filter\\(MetaEntity.id == record.entity_id\\).first\\(\\)\n    record.entity_code = entity.code if entity else ''''\n    record.entity_name = entity.default_name if entity else ''''\n    \n    enriched_values = []\n    for val in record.values:\n        attr = db.query\\(MetaAttribute\\).filter\\(MetaAttribute.id == val.attribute_id\\).first\\(\\)\n        if attr:\n            val.attribute_code = attr.code\n            val.attribute_label = attr.default_label\n            val.data_type = attr.data_type.value\n            if val.reference_id:\n                ref_record = db.query\\(MasterData\\).filter\\(MasterData.id == val.reference_id\\).first\\(\\)\n                if ref_record:\n                    val.reference_display = f''{ref_record.code} - {ref_record.name}''\n            enriched_values.append\\(val\\)\n    \n    record.values = enriched_values\n    record.flat_values = get_flat_values\\(db, record\\)\n    return record\n\ntry:\n    records = db.query\\(MasterData\\).options\\(joinedload\\(MasterData.values\\)\\)        .filter\\(MasterData.entity_id == 15\\)        .limit\\(1\\)        .all\\(\\)\n    \n    for r in records:\n        print\\(f''Before enrich: {r.code}''\\)\n        enriched = enrich_response\\(db, r\\)\n        print\\(f''After enrich: {enriched.code}, entity_code: {enriched.entity_code}''\\)\n        print\\(f''flat_values: {enriched.flat_values}''\\)\nexcept Exception as e:\n    print\\(f''Error: {e}''\\)\n    import traceback\n    traceback.print_exc\\(\\)\n\ndb.close\\(\\)\n\")",
      "Bash(tasklist:*)",
      "Bash(\"C:\\\\Users\\\\Egemen\\\\Desktop\\\\budget-system\\\\venv\\\\Scripts\\\\python.exe\" -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000)",
      "Bash(TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiOTQyZjUxOTAtMTA0Mi00Njg0LWI3N2MtMThiYjg4NDExMTU1IiwidXNlcm5hbWUiOiJhZG1pbiIsImVtYWlsIjoiYWRtaW5AZXhhbXBsZS5jb20iLCJpc19hZG1pbiI6dHJ1ZSwiZXhwIjoxNzcwMjEyMzgwLCJpYXQiOjE3NzAxMjU5ODB9.iyVlKmvO5nEVNZXFHhFXLrajbnhq3qIS2Iv_2J3vVAQ\")",
      "Bash(powershell -Command:*)",
      "Bash(C:UsersEgemenDesktopbudget-systemvenvScriptspython.exe:*)",
      "Bash(python3:*)",
      "Bash(git worktree:*)",
      "Bash(git add:*)"
    ]
  }
}
